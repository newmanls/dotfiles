#!/usr/bin/env bash

set -euo pipefail

bg="${XDG_CONFIG_HOME:-${HOME}/.config}/bg"

if [ "${1:-}" ]; then
    file=$(readlink -f "${1}")
    mime=$(file --mime-type --brief "${file}")

    case "${mime}" in
        image/*) cp "${file}" "${bg}" ;;
        *)       exit 1 ;;
    esac
fi

hsetroot -cover "${bg}" > /dev/null 2>&1
