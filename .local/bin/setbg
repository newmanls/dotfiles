#!/usr/bin/env bash

set -euo pipefail

bg_path="${HOME}/.cache/setbg"

if [ "${1:-}" ]; then
    filepath=$(readlink -f "${1}")
    filetype=$(file --mime-type -b "${filepath}")

    case "${filetype}" in
        image/*) cp "${filepath}" "${bg_path}" ;;
        *)       exit 1 ;;
    esac
fi

hsetroot -cover "${bg_path}" > /dev/null 2>&1
